<ion-header>
  <ion-toolbar>
    <ion-title>Search Users</ion-title>
  </ion-toolbar>
  <div class="row ion-padding">
    <ion-searchbar #searchbar></ion-searchbar>
    <ion-button
      [disabled]="!searchbar.value"
      (click)="search(searchbar.value)"
      size="small"
      >Search</ion-button
    >
  </div>
  <div *ngIf="remainingRequests" class="ion-text-center ion-padding">
    {{remainingRequests}} searches remaining <br />
    {{resultCount}} users found
  </div>
</ion-header>

<ion-content class="ion-padding">
  <div class="container">
    <ion-list>
      <!-- <ion-item
        *ngFor="let user of results; let index = index"
        [ngClass]="{'first': index === (pagesNavigated * itemsPerPage)}"
      > -->
      <ion-item
        *ngFor="let user of results; let index = index"
      >
        <ion-avatar slot="start">
          <img [src]="user.avatar_url" />
        </ion-avatar>
        <ion-label>
          {{user.login}}
        </ion-label>
      </ion-item>
    </ion-list>

    <!-- <ion-infinite-scroll
      *ngIf="resultCount > itemsPerPage"
      [disabled]="currentPage === lastPage" // Send event to disable infinity scroll
      threshold="100px"
      (ionInfinite)="next($event)"
    >
      <ion-infinite-scroll-content
        loadingSpinner="bubbles"
        loadingText="Loading more data..."
      >
      </ion-infinite-scroll-content>
    </ion-infinite-scroll> -->
  </div>
</ion-content>

<app-pagination *ngIf="resultCount > usersPerPage" [numItems]="resultCount" [itemsPerPage]="usersPerPage" [stepSize]="3"></app-pagination>
